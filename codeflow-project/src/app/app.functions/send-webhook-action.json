{
  "type": "workflow-action-definition",
  "actionFunction": "sendWebhook",
  "objectTypes": ["CONTACT", "COMPANY", "DEAL", "TICKET"],
  "labels": {
    "en": {
      "actionName": "CodeFlow: Send Webhook",
      "actionDescription": "Send an HTTP request to any URL with dynamic data from the workflow",
      "actionCardContent": "Send webhook to {{webhookUrl}}"
    }
  },
  "inputFields": [
    {
      "typeDefinition": {
        "name": "webhookUrl",
        "type": "string",
        "fieldType": "text"
      },
      "supportedValueTypes": ["STATIC_VALUE", "OBJECT_PROPERTY"],
      "isRequired": true,
      "labels": {
        "en": {
          "label": "Webhook URL",
          "description": "The URL to send the request to. Supports {{handlebars}} templates."
        }
      }
    },
    {
      "typeDefinition": {
        "name": "webhookMethod",
        "type": "enumeration",
        "options": [
          { "label": "POST", "value": "POST" },
          { "label": "GET", "value": "GET" },
          { "label": "PUT", "value": "PUT" },
          { "label": "PATCH", "value": "PATCH" },
          { "label": "DELETE", "value": "DELETE" }
        ]
      },
      "supportedValueTypes": ["STATIC_VALUE"],
      "isRequired": false,
      "labels": {
        "en": {
          "label": "HTTP Method",
          "description": "The HTTP method to use. Defaults to POST."
        }
      }
    },
    {
      "typeDefinition": {
        "name": "webhookHeaders",
        "type": "string",
        "fieldType": "textarea"
      },
      "supportedValueTypes": ["STATIC_VALUE"],
      "isRequired": false,
      "labels": {
        "en": {
          "label": "Headers (JSON)",
          "description": "Custom headers as JSON object. Example: {\"Authorization\": \"Bearer {{token}}\"}"
        }
      }
    },
    {
      "typeDefinition": {
        "name": "webhookBody",
        "type": "string",
        "fieldType": "textarea"
      },
      "supportedValueTypes": ["STATIC_VALUE"],
      "isRequired": false,
      "labels": {
        "en": {
          "label": "Request Body (JSON)",
          "description": "The request body as JSON. Supports {{handlebars}} templates. If empty, sends object data."
        }
      }
    },
    {
      "typeDefinition": {
        "name": "outputMappings",
        "type": "string",
        "fieldType": "textarea"
      },
      "supportedValueTypes": ["STATIC_VALUE"],
      "isRequired": false,
      "labels": {
        "en": {
          "label": "Output Mappings (JSON)",
          "description": "Map response fields to outputs. Example: [{\"outputFieldName\": \"userId\", \"jsonPath\": \"data.id\"}]"
        }
      }
    },
    {
      "typeDefinition": {
        "name": "retryEnabled",
        "type": "enumeration",
        "options": [
          { "value": "true", "label": "Yes" },
          { "value": "false", "label": "No" }
        ]
      },
      "supportedValueTypes": ["STATIC_VALUE"],
      "isRequired": false,
      "labels": {
        "en": {
          "label": "Enable Retry",
          "description": "Automatically retry failed requests with exponential backoff. Default: Yes"
        }
      }
    },
    {
      "typeDefinition": {
        "name": "maxRetries",
        "type": "enumeration",
        "options": [
          { "value": "1", "label": "1 retry" },
          { "value": "2", "label": "2 retries" },
          { "value": "3", "label": "3 retries (default)" },
          { "value": "5", "label": "5 retries" }
        ]
      },
      "supportedValueTypes": ["STATIC_VALUE"],
      "isRequired": false,
      "labels": {
        "en": {
          "label": "Max Retries",
          "description": "Maximum number of retry attempts for failed requests"
        }
      }
    },
    {
      "typeDefinition": {
        "name": "retryDelayMs",
        "type": "enumeration",
        "options": [
          { "value": "500", "label": "500ms" },
          { "value": "1000", "label": "1 second (default)" },
          { "value": "2000", "label": "2 seconds" },
          { "value": "5000", "label": "5 seconds" }
        ]
      },
      "supportedValueTypes": ["STATIC_VALUE"],
      "isRequired": false,
      "labels": {
        "en": {
          "label": "Initial Retry Delay",
          "description": "Initial delay before first retry. Doubles with each attempt (exponential backoff)"
        }
      }
    }
  ],
  "outputFields": [
    {
      "typeDefinition": {
        "name": "codeflow_success",
        "type": "bool"
      },
      "labels": {
        "en": { "label": "Success" }
      }
    },
    {
      "typeDefinition": {
        "name": "codeflow_status_code",
        "type": "number"
      },
      "labels": {
        "en": { "label": "HTTP Status Code" }
      }
    },
    {
      "typeDefinition": {
        "name": "codeflow_error",
        "type": "string"
      },
      "labels": {
        "en": { "label": "Error Message" }
      }
    },
    {
      "typeDefinition": {
        "name": "codeflow_retries_used",
        "type": "number"
      },
      "labels": {
        "en": { "label": "Retries Used" }
      }
    }
  ]
}
